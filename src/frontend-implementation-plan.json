{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Fix sidebar navigation to smooth-scroll to in-page sections without redirect/reload",
  "requirements": [
    {
      "id": "REQ-1",
      "summary": "Ensure the landing page renders exactly one in-page section for each required sidebar target ID.",
      "acceptanceCriteria": [
        "Document contains exactly one element per required section ID: #home, #create-wish, #templates, #marketplace, #pricing, #dashboard, #faq.",
        "Clicking a navigation item for any of these IDs scrolls to a visible section (no missing target element)."
      ],
      "file_operations": [
        {
          "path": "frontend/src/App.tsx",
          "operation": "modify",
          "description": "Verify the main landing-page composition renders a single instance of the required section components (Home/Hero, Create Wish/Generator, Templates, Marketplace, Pricing, Dashboard, FAQ) and add a lightweight development-time guard that detects duplicate/missing required IDs in the DOM to prevent regressions."
        },
        {
          "path": "frontend/src/sections/HeroSection.tsx",
          "operation": "modify",
          "description": "Confirm the Home section uses id=\"home\" and maintains a consistent scroll margin class (e.g., scroll-mt-16) aligned with sticky-header behavior."
        },
        {
          "path": "frontend/src/sections/GeneratorSection.tsx",
          "operation": "modify",
          "description": "Confirm the Create Wish section uses id=\"create-wish\" and maintains a consistent scroll margin class (e.g., scroll-mt-16) aligned with sticky-header behavior."
        },
        {
          "path": "frontend/src/sections/TemplatesSection.tsx",
          "operation": "modify",
          "description": "Confirm the Templates section uses id=\"templates\" and maintains a consistent scroll margin class (e.g., scroll-mt-16) aligned with sticky-header behavior."
        },
        {
          "path": "frontend/src/sections/MarketplaceSection.tsx",
          "operation": "modify",
          "description": "Confirm the Marketplace section uses id=\"marketplace\" and maintains a consistent scroll margin class (e.g., scroll-mt-16) aligned with sticky-header behavior."
        },
        {
          "path": "frontend/src/sections/PricingSection.tsx",
          "operation": "modify",
          "description": "Confirm the Pricing section uses id=\"pricing\" and maintains a consistent scroll margin class (e.g., scroll-mt-16) aligned with sticky-header behavior."
        },
        {
          "path": "frontend/src/sections/DashboardSection.tsx",
          "operation": "modify",
          "description": "Confirm the Dashboard section uses id=\"dashboard\" and maintains a consistent scroll margin class (e.g., scroll-mt-16) aligned with sticky-header behavior."
        },
        {
          "path": "frontend/src/sections/FaqSection.tsx",
          "operation": "modify",
          "description": "Confirm the FAQ section uses id=\"faq\" and maintains a consistent scroll margin class (e.g., scroll-mt-16) aligned with sticky-header behavior."
        }
      ]
    },
    {
      "id": "REQ-2",
      "summary": "Update sidebar/mobile navigation clicks to only smooth-scroll in-page, close the menu, and never trigger route navigation or reload.",
      "acceptanceCriteria": [
        "Sidebar/mobile menu items do not use href=\"/\", href=\"#\", or router navigation for in-page section navigation.",
        "Clicking any sidebar/mobile menu item keeps the user on the current page (no reload) and does not reset scroll position to the top unless the selected section is Home.",
        "After clicking a menu item, the sidebar/mobile sheet closes.",
        "Scrolling to sections uses a smooth animation when prefers-reduced-motion is not enabled."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/navigation/StickyNavbar.tsx",
          "operation": "modify",
          "description": "Ensure all navigation items (desktop + mobile sheet) are implemented as click handlers (not anchors) that call the in-page scroll handler, do not mutate routes/URLs, and reliably close the mobile Sheet after selection. Use the shadcn-ui Sheet/Button components already present for the mobile menu behavior; verify the component's usage instructions before implementing."
        }
      ]
    },
    {
      "id": "REQ-3",
      "summary": "Standardize sidebar smooth scrolling to exclusively use the existing smoothScrollToAnchor utility with reduced-motion support.",
      "acceptanceCriteria": [
        "Sidebar navigation calls the existing smoothScrollToAnchor(anchorId) for all section targets.",
        "When the user has prefers-reduced-motion enabled, the scroll behavior becomes non-animated (instant)."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/navigation/StickyNavbar.tsx",
          "operation": "modify",
          "description": "Refactor/confirm the sidebar navigation handler is the single mechanism used by StickyNavbar for section scrolling and that it always calls smoothScrollToAnchor(sectionId) for every NAV item (including the brand/logo Home action). Use the shadcn-ui Button and Sheet primitives as currently wired; verify the component's usage instructions before implementing."
        },
        {
          "path": "frontend/src/lib/scroll.ts",
          "operation": "modify",
          "description": "Harden smoothScrollToAnchor so it remains the canonical scrolling utility (keeps reduced-motion support) and is robust across layouts (e.g., header height changes), without introducing any router-based navigation."
        }
      ]
    },
    {
      "id": "REQ-4",
      "summary": "Fix sticky-header offset so scrolled-to sections are not covered by the navbar by combining consistent section scroll margins with a header-aware scroll offset.",
      "acceptanceCriteria": [
        "All main sections targeted by sidebar navigation have a consistent scroll margin (e.g., Tailwind scroll-mt-16 or equivalent) so their headings/content are visible below the sticky header after navigation.",
        "smoothScrollToAnchor offsets scroll position by the sticky header height (or uses an equivalent robust approach) so the section content is not covered by the navbar."
      ],
      "file_operations": [
        {
          "path": "frontend/src/lib/scroll.ts",
          "operation": "modify",
          "description": "Update smoothScrollToAnchor to compute an effective sticky-header height at runtime (e.g., measure the sticky navbar element) with a safe fallback, then apply the offset so section content lands below the sticky header while preserving smooth vs instant behavior based on prefers-reduced-motion."
        },
        {
          "path": "frontend/src/components/navigation/StickyNavbar.tsx",
          "operation": "modify",
          "description": "Add a stable selector (e.g., id or data attribute) on the sticky navbar root so the scroll utility can measure header height consistently across breakpoints. This navbar uses shadcn-ui primitives (Sheet/Button); verify the component's usage instructions before implementing."
        },
        {
          "path": "frontend/src/sections/HeroSection.tsx",
          "operation": "modify",
          "description": "Ensure the Home section has the same scroll margin treatment as other sidebar-targeted sections (retain/standardize scroll-mt-16 or equivalent) so its content is not hidden under the sticky header."
        },
        {
          "path": "frontend/src/sections/GeneratorSection.tsx",
          "operation": "modify",
          "description": "Ensure the Create Wish section retains/standardizes scroll-mt-16 (or equivalent) to match the sticky-header offset behavior."
        },
        {
          "path": "frontend/src/sections/TemplatesSection.tsx",
          "operation": "modify",
          "description": "Ensure the Templates section retains/standardizes scroll-mt-16 (or equivalent) to match the sticky-header offset behavior."
        },
        {
          "path": "frontend/src/sections/MarketplaceSection.tsx",
          "operation": "modify",
          "description": "Ensure the Marketplace section retains/standardizes scroll-mt-16 (or equivalent) to match the sticky-header offset behavior."
        },
        {
          "path": "frontend/src/sections/PricingSection.tsx",
          "operation": "modify",
          "description": "Ensure the Pricing section retains/standardizes scroll-mt-16 (or equivalent) to match the sticky-header offset behavior."
        },
        {
          "path": "frontend/src/sections/DashboardSection.tsx",
          "operation": "modify",
          "description": "Ensure the Dashboard section retains/standardizes scroll-mt-16 (or equivalent) to match the sticky-header offset behavior."
        },
        {
          "path": "frontend/src/sections/FaqSection.tsx",
          "operation": "modify",
          "description": "Ensure the FAQ section retains/standardizes scroll-mt-16 (or equivalent) to match the sticky-header offset behavior."
        }
      ]
    }
  ]
}